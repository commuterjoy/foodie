/*!
  * qwery.js - copyright @dedfat
  * https://github.com/ded/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function s(a,b){if(!b||!a||b==a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);return!1}function r(a){var b=[],c,d,e,f,g,h,j=[],k,p,q=!0,r=o(a);if(!r.length)return b;b=n(r.pop());if(!r.length)return b;for(f=b.length;f--;){p=b[f],h=p;for(e=r.length;e--;){q=!1;parents:while(h!==i&&(h=h.parentNode))if(m(l(r[e]),h)){q=!0;break parents}}q&&j.push(p)}return j}function q(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(new RegExp("^"+p(c)));case"$=":return b.match(new RegExp(p(c)+"$"));case"*=":return b.match(new RegExp(p(c)))}return!1}function p(a){return a.replace(/([\.\*\+\?\^\$\{\}\(\)\|\[\]\/\\])/g,"\\$1")}function o(a){var b=[],c=[],d=!1;e(a.split(/\s+/)).each(function(a){d?(c.push(a),/\]/.test(a)&&(d=!1,b=b.concat(c.join(" ")))):/\[[^\]]*$/.test(a)?(d=!0,c=[],c.push(a)):b.push(a)});return b}function n(a){var b,c,d=[],e=l(a),f=e[1]||"*",g=document.getElementsByTagName(f);for(b=0;b<g.length;b++)el=g[b],(c=m(e,el))&&d.push(c);return d}function m(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l,m,n,o,p;if(d&&b.tagName.toLowerCase()!==d)return!1;if(e&&(o=e.match(f))&&o[1]!==b.id)return!1;if(e&&(p=e.match(g)))for(n=0;n<p.length;n++)if(!(new RegExp("(^|\\s+)"+p[n].slice(1)+"(\\s+|$)")).test(b.className))return!1;if(h&&!k){var r=b.attributes,s;for(s in r)if(r.hasOwnProperty(s)&&r[s].name==i)return b}if(h&&!q(j,b.getAttribute(i)||"",k))return!1;return b}function l(a){return a.match(new RegExp(j.source+"("+k.source+")?"))}function e(a){return new d(a)}function d(a){this.obj=c(a)}function c(a){var b,c,d=[];for(b=0,c=a.length;b<c;b++)d[b]=a[b];return d}d.prototype={each:function(a){for(var b=0;b<this.obj.length;b++)a.call(this.obj[b],this.obj[b],b,this.obj);return this},map:function(a){var b=[],c;for(c=0;c<this.obj.length;c++)b[c]=a.call(this.obj[c],this.obj[c],c,this.obj);return b}};var f=/#([\w\-]+)/,g=/\.[\w\-]+/g,h=/^#([\w\-]+$)/,i=document.getElementsByTagName("html")[0],j=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,k=/\[([\w\-]+)(?:([\^\$\*]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,t=function(){function d(d,e){var e=typeof e=="string"?document.querySelector(e):e,f;if(f=d.match(h))return[document.getElementById(f[1])];if(b=d.match(a))return c((e||document).getElementsByClassName(b[1]),0);return c((e||document).querySelectorAll(d),0)}var a=/^\.([\w\-]+)$/,b;if(document.querySelector&&document.querySelectorAll)return d;return function(a,b){var b=typeof b=="string"?t(b)[0]:b||document,c;if(c=a.match(h))return[document.getElementById(c[1])];var d=[],f=e(a.split(",")).map(function(a){return r(a)});e(f).each(function(a){var c=a;b!==document&&(c=[],e(a).each(function(a){s(a,b)&&c.push(a)})),d=d.concat(c)});return d}}(),u=a.qwery;t.noConflict=function(){a.qwery=u;return this},a.qwery=t}(this,document)